require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({2:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var dfa_1 = require("../models/dfa");
var StateNode = (function () {
    function StateNode(stateNum) {
    }
    return StateNode;
}());
var dfa = new dfa_1.Dfa();
var states = [];
function createDefaultDfa() {
    var alphabet = ['0', '1'];
    var numStates = 3;
    var startState = 0;
    var acceptingStates = [2];
    var transitions = {
        0: {
            '0': 1,
            '1': 0
        },
        1: {
            '0': 2,
            '1': 0
        },
        2: {
            '0': 2,
            '1': 0
        }
    };
    return new dfa_1.Dfa({
        alphabet: alphabet,
        numStates: numStates,
        startState: startState,
        acceptingStates: acceptingStates,
        transitions: transitions
    });
}
function saveDfaToFile() {
}
function loadDfaFromFile() {
    var input = document.getElementById('dfaFile');
    if (input.files.length == 1) {
        var reader_1 = new FileReader();
        reader_1.onload = function (e) {
            dfa.deserialize(reader_1.result);
            loadDfa(dfa);
        };
        reader_1.readAsText(input.files[0]);
    }
}
function loadDfa(newDfa) {
    clearAll();
    dfa = newDfa;
    updatePanel();
    updateSVG();
}
function updatePanel() {
    updateAlphabet();
    updateNumStates();
    updateStartState();
    updateAcceptStates();
    updateTransitions();
}
function updateSVG() {
    createStates();
}
function updateAlphabet() {
    var alphabetInput = document.getElementById('alphabetInput');
    alphabetInput.value = dfa.alphabet.join(',');
}
function updateNumStates() {
    var numStatesInput = document.getElementById('numStatesInput');
    numStatesInput.value = dfa.numStates.toString();
}
function updateStartState() {
    var startStateInput = document.getElementById('startStateInput');
    startStateInput.value = dfa.startState.toString();
}
function updateAcceptStates() {
    var acceptingStatesInput = document.getElementById('acceptingStatesInput');
    acceptingStatesInput.value = dfa.acceptingStates.join(',');
}
function updateTransitions() {
    clearTransitionsList();
    for (var fromState = 0; fromState < dfa.numStates; fromState++) {
        for (var _i = 0, _a = dfa.alphabet; _i < _a.length; _i++) {
            var letter = _a[_i];
            addTransition(fromState, letter, dfa.transitions[fromState][letter]);
        }
    }
}
function clearTransitionsList() {
    var transitionsList = document.getElementById("transitionsList");
    while (transitionsList.firstChild) {
        transitionsList.removeChild(transitionsList.firstChild);
    }
}
function addTransition(fromState, letter, toState) {
    var transitionList = document.getElementById('transitionsList');
    var text = fromState.toString() + ' + ' + letter + ' &rarr;';
    var listElement = document.createElement('li');
    listElement.classList.add('list-group-item');
    var listItemString = '<div class="input-group">\
            <div class="input-group-prepend">\
                <span class="input-group-text">' + text + '</span>\
            </div>\
            <input type="number" class="form-control" placeholder="Q" value="' + toState + '">\
        </div>';
    listElement.innerHTML = listItemString;
    transitionList.appendChild(listElement);
}
function createState(event) {
    var svg = document.getElementById('dfaSvg');
    var domPoint = mouseEventToSVGCoord(svg, event);
    createStateAtPoint(domPoint.x, domPoint.y);
}
function addDrag(state, grid) {
    var selectedElement = null;
    var offset;
    state.addEventListener('mousedown', startDrag);
    document.addEventListener('mousemove', drag);
    state.addEventListener('mouseup', endDrag);
    function startDrag(event) {
        selectedElement = state;
        offset = mouseEventToSVGCoord(grid, event);
        offset.x -= parseFloat(selectedElement.getAttributeNS(null, "cx"));
        offset.y -= parseFloat(selectedElement.getAttributeNS(null, 'cy'));
    }
    function drag(event) {
        if (selectedElement) {
            event.preventDefault();
            var domPoint = mouseEventToSVGCoord(grid, event);
            state.setAttribute('cx', (domPoint.x - offset.x).toString());
            state.setAttribute('cy', (domPoint.y - offset.y).toString());
        }
    }
    function endDrag(event) {
        selectedElement = null;
    }
}
function mouseEventToSVGCoord(svg, mouseEvent) {
    return toSvgCoord(svg, mouseEvent.x, mouseEvent.y);
}
function toSvgCoord(svg, x, y) {
    var point = svg.createSVGPoint();
    point.x = x;
    point.y = y;
    return point.matrixTransform(svg.getScreenCTM().inverse());
}
function clearAll() {
    clearPanel();
    clearSvg();
}
function clearPanel() {
    var alphabetInput = document.getElementById('alphabetInput');
    alphabetInput.value = '';
    var numStatesInput = document.getElementById('numStatesInput');
    numStatesInput.value = '';
    var startStateInput = document.getElementById('startStateInput');
    startStateInput.value = '';
    var acceptingStatesInput = document.getElementById('acceptingStatesInput');
    acceptingStatesInput.value = '';
}
function clearSvg() {
    clearStates();
    clearTransitions();
}
function clearStates() {
    var elements = document.getElementsByClassName('state');
    for (var i = elements.length - 1; i >= 0; i--) {
        elements[i].remove();
    }
}
function clearTransitions() {
    var transitionList = document.getElementById('transitionsList');
    var childNodes = transitionList.childNodes;
    for (var i = childNodes.length - 1; i >= 0; i--) {
        var child = childNodes[i];
        child.remove();
    }
}
function createStateAtPoint(svgX, svgY) {
    var svg = document.getElementById('dfaSvg');
    var circle = document.createElementNS("http://www.w3.org/2000/svg", 'circle');
    circle.setAttribute('draggable', 'true');
    circle.setAttribute('r', '40');
    circle.setAttribute('cx', svgX.toString());
    circle.setAttribute('cy', svgY.toString());
    circle.style.stroke = 'black';
    circle.style.strokeWidth = '3';
    circle.style.fill = 'white';
    circle.style.position = 'absolute';
    circle.classList.add('state');
    circle.onmouseenter = function (event) {
        circle.style.fill = '#BBBBBB';
    };
    circle.onmouseleave = function (event) {
        circle.style.fill = '#FFFFFF';
    };
    addDrag(circle, svg);
    svg.appendChild(circle);
}
var stateSpacing = 200;
function createStates() {
    var svg = document.getElementById('dfaSvg');
    var middle = dfa.numStates / 2 - .5;
    var svgWidth = svg.getBBox().width;
    var svgHeight = svg.getBBox().height;
    for (var i = 0; i < dfa.numStates; i++) {
        var startX = svgWidth / 2 + (i - middle) * stateSpacing;
        var startY = svgHeight / 2 - middle * stateSpacing;
        createStateAtPoint(startX, startY);
    }
}
function addGridEvents() {
    document.getElementById('grid').addEventListener('click', function (event) {
        createState(event);
    });
}
function loadDefaultDfa() {
    loadDfa(createDefaultDfa());
}
function testString() {
    var inputElement = document.getElementById('testStringInput');
    var inputString = inputElement.value;
    var result = dfa.acceptsString(inputString);
    result ? resultSuccess(inputString) : resultFail(inputString);
}
function clearInput() {
    resultReset();
    var inputElement = document.getElementById('testStringInput');
    inputElement.value = '';
}
function resultSuccess(inputString) {
    var resultElement = document.getElementById('resultBar');
    resultElement.style.background = 'green';
    var resultText = document.getElementById('resultText');
    resultText.innerText = '"' + inputString + '" yields SUCCESS';
}
function resultFail(inputString) {
    var resultElement = document.getElementById('resultBar');
    resultElement.style.background = 'red';
    var resultText = document.getElementById('resultText');
    resultText.innerText = '"' + inputString + '" yields FAIL';
}
function resultReset() {
    var resultElement = document.getElementById('resultBar');
    resultElement.style.background = '#444444';
    var resultText = document.getElementById('resultText');
    resultText.innerText = 'Result';
}
$(document).ready(function () {
    document.getElementById('loadBtn').addEventListener('click', function () {
        loadDfaFromFile();
    });
    document.getElementById('loadExampleBtn').addEventListener('click', function () {
        loadDefaultDfa();
    });
    document.getElementById('testBtn').addEventListener('click', function () {
        testString();
    });
    document.getElementById('clearBtn').addEventListener('click', function () {
        clearAll();
    });
    document.getElementById('clearInputBtn').addEventListener('click', function () {
        clearInput();
    });
    document.getElementById('testStringInput').addEventListener('change', function () {
        resultReset();
    });
    loadDefaultDfa();
});
},{"../models/dfa":3}],3:[function(require,module,exports){
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var fs_1 = require("fs");
var Dfa = (function () {
    function Dfa(_a) {
        var _b = _a === void 0 ? {} : _a, _c = _b.alphabet, alphabet = _c === void 0 ? [] : _c, _d = _b.numStates, numStates = _d === void 0 ? 0 : _d, _e = _b.startState, startState = _e === void 0 ? 0 : _e, _f = _b.acceptingStates, acceptingStates = _f === void 0 ? [] : _f, _g = _b.transitions, transitions = _g === void 0 ? {} : _g;
        this.alphabet = alphabet;
        this.numStates = numStates;
        this.startState = startState;
        this.acceptingStates = acceptingStates;
        this.transitions = transitions;
    }
    Dfa.prototype.acceptsString = function (inputString) {
        var execution = new DfaExecution(this, inputString);
        execution.finish();
        return this.acceptingStates.includes(execution.currentState);
    };
    Dfa.prototype.deserialize = function (contents) {
        var lines = contents.split('\n');
        this.alphabet = lines[0].split(',');
        this.numStates = parseInt(lines[1]);
        this.startState = parseInt(lines[2]);
        this.acceptingStates = lines[3].split(',').map(function (i) {
            return parseInt(i);
        });
        this.transitions = {};
        for (var state = 0; state < this.numStates; state++) {
            this.transitions[state] = {};
            for (var _i = 0, _a = this.alphabet; _i < _a.length; _i++) {
                var char = _a[_i];
                this.transitions[state][char] = -1;
            }
        }
        var numTransitions = this.alphabet.length * this.numStates;
        for (var i = 4; i < 4 + numTransitions; i++) {
            var line = lines[i].split(',');
            this.transitions[parseInt(line[0])][line[1]] = parseInt(line[2]);
        }
    };
    Dfa.prototype.serialize = function () {
        var contents = [];
        ;
        contents.push(this.alphabet.join(','));
        contents.push(this.numStates.toString());
        contents.push(this.startState.toString());
        contents.push(this.acceptingStates.join(','));
        for (var state = 0; state <= this.numStates; state++) {
            for (var _i = 0, _a = this.alphabet; _i < _a.length; _i++) {
                var letter = _a[_i];
                contents.push(state.toString() + ',' + letter + ',' +
                    this.transitions[state][letter]);
            }
        }
        return contents.join('\n');
    };
    Dfa.prototype.readFromFile = function (filepath) {
        var contents = fs_1.readFileSync(filepath, "utf8");
        this.deserialize(contents);
    };
    Dfa.prototype.writeToFile = function (filepath) {
        var contents = this.serialize();
        fs_1.writeFileSync(filepath, contents);
    };
    return Dfa;
}());
exports.Dfa = Dfa;
var DfaExecution = (function () {
    function DfaExecution(dfa, inputString) {
        this.dfa = dfa;
        this.currentState = dfa.startState;
        this.inputString = inputString;
        this.currentCharIndex = 0;
    }
    DfaExecution.prototype.finish = function () {
        while (this.currentCharIndex < this.inputString.length) {
            this.step();
        }
    };
    DfaExecution.prototype.step = function () {
        if (this.currentCharIndex >= this.inputString.length) {
            return;
        }
        var currentChar = this.inputString[this.currentCharIndex++];
        var nextState = this.dfa.transitions[this.currentState][currentChar];
        this.currentState = nextState;
    };
    return DfaExecution;
}());
exports.DfaExecution = DfaExecution;
},{"fs":1}],1:[function(require,module,exports){

},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9mYWN0b3ItYnVuZGxlL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvZnJvbnRlbmQvZGZhX2NsaWVudC50cyIsInNyYy9tb2RlbHMvZGZhLnRzIiwibm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbGliL19lbXB0eS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0FDQUEscUNBQW9DO0FBS3BDO0lBR0ksbUJBQVksUUFBZ0I7SUFFNUIsQ0FBQztJQUNMLGdCQUFDO0FBQUQsQ0FOQSxBQU1DLElBQUE7QUFFRCxJQUFJLEdBQUcsR0FBUSxJQUFJLFNBQUcsRUFBRSxDQUFDO0FBQ3pCLElBQUksTUFBTSxHQUFrQixFQUFFLENBQUM7QUFFL0IsU0FBUyxnQkFBZ0I7SUFFckIsSUFBSSxRQUFRLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDMUIsSUFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFDO0lBQ2xCLElBQUksVUFBVSxHQUFHLENBQUMsQ0FBQztJQUNuQixJQUFJLGVBQWUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzFCLElBQUksV0FBVyxHQUFHO1FBQ2QsQ0FBQyxFQUFFO1lBQ0MsR0FBRyxFQUFFLENBQUM7WUFDTixHQUFHLEVBQUUsQ0FBQztTQUNUO1FBQ0QsQ0FBQyxFQUFFO1lBQ0MsR0FBRyxFQUFFLENBQUM7WUFDTixHQUFHLEVBQUUsQ0FBQztTQUNUO1FBQ0QsQ0FBQyxFQUFFO1lBQ0MsR0FBRyxFQUFFLENBQUM7WUFDTixHQUFHLEVBQUUsQ0FBQztTQUNUO0tBQ0osQ0FBQztJQUNGLE9BQU8sSUFBSSxTQUFHLENBQUM7UUFDWCxRQUFRLFVBQUE7UUFDUixTQUFTLFdBQUE7UUFDVCxVQUFVLFlBQUE7UUFDVixlQUFlLGlCQUFBO1FBQ2YsV0FBVyxhQUFBO0tBQ2QsQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQUVELFNBQVMsYUFBYTtBQUV0QixDQUFDO0FBRUQs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QUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzlFLElBQUksQ0FBQyxZQUFZLEdBQUcsU0FBUyxDQUFDO0lBQ2xDLENBQUM7SUFDTCxtQkFBQztBQUFELENBM0JBLEFBMkJDLElBQUE7QUFFWSxvQ0FBWTs7QUM5R3pCIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCB7IERmYSB9IGZyb20gJy4uL21vZGVscy9kZmEnO1xuaW1wb3J0IHsgcmVhZCB9IGZyb20gJ2ZzJztcbmltcG9ydCB7IHBhdGhUb0ZpbGVVUkwgfSBmcm9tICd1cmwnO1xuaW1wb3J0IHsgY3JlYXRlIH0gZnJvbSAnZG9tYWluJztcblxuY2xhc3MgU3RhdGVOb2RlIHtcbiAgICBzdGF0ZU51bTogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3Ioc3RhdGVOdW06IG51bWJlcikge1xuXG4gICAgfVxufVxuXG5sZXQgZGZhOiBEZmEgPSBuZXcgRGZhKCk7XG5sZXQgc3RhdGVzOiBTVkdHRWxlbWVudFtdID0gW107XG5cbmZ1bmN0aW9uIGNyZWF0ZURlZmF1bHREZmEoKTogRGZhIHtcbiAgICAvL0VuZHMgd2l0aCBcIjAwXCIgREZBXG4gICAgbGV0IGFscGhhYmV0ID0gWycwJywgJzEnXTtcbiAgICBsZXQgbnVtU3RhdGVzID0gMztcbiAgICBsZXQgc3RhcnRTdGF0ZSA9IDA7XG4gICAgbGV0IGFjY2VwdGluZ1N0YXRlcyA9IFsyXTtcbiAgICBsZXQgdHJhbnNpdGlvbnMgPSB7XG4gICAgICAgIDA6IHtcbiAgICAgICAgICAgICcwJzogMSxcbiAgICAgICAgICAgICcxJzogMFxuICAgICAgICB9LFxuICAgICAgICAxOiB7XG4gICAgICAgICAgICAnMCc6IDIsXG4gICAgICAgICAgICAnMSc6IDBcbiAgICAgICAgfSxcbiAgICAgICAgMjoge1xuICAgICAgICAgICAgJzAnOiAyLFxuICAgICAgICAgICAgJzEnOiAwXG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBuZXcgRGZhKHtcbiAgICAgICAgYWxwaGFiZXQsXG4gICAgICAgIG51bVN0YXRlcyxcbiAgICAgICAgc3RhcnRTdGF0ZSxcbiAgICAgICAgYWNjZXB0aW5nU3RhdGVzLFxuICAgICAgICB0cmFuc2l0aW9uc1xuICAgIH0pOyBcbn1cblxuZnVuY3Rpb24gc2F2ZURmYVRvRmlsZSgpIHtcblxufVxuXG5mdW5jdGlvbiBsb2FkRGZhRnJvbUZpbGUoKSB7XG4gICAgdmFyIGlucHV0IDogSFRNTElucHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZmFGaWxlJykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBpZiAoaW5wdXQuZmlsZXMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgbGV0IHJlYWRlcjogRmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBkZmEuZGVzZXJpYWxpemUocmVhZGVyLnJlc3VsdCBhcyBzdHJpbmcpO1xuICAgICAgICAgICAgbG9hZERmYShkZmEpOyBcbiAgICAgICAgfVxuICAgICAgICByZWFkZXIucmVhZEFzVGV4dChpbnB1dC5maWxlc1swXSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBsb2FkRGZhKG5ld0RmYTogRGZhKSB7XG4gICAgY2xlYXJBbGwoKTtcbiAgICBkZmEgPSBuZXdEZmE7XG4gICAgdXBkYXRlUGFuZWwoKTtcbiAgICB1cGRhdGVTVkcoKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlUGFuZWwoKSB7XG4gICAgdXBkYXRlQWxwaGFiZXQoKTtcbiAgICB1cGRhdGVOdW1TdGF0ZXMoKTtcbiAgICB1cGRhdGVTdGFydFN0YXRlKCk7XG4gICAgdXBkYXRlQWNjZXB0U3RhdGVzKCk7XG4gICAgdXBkYXRlVHJhbnNpdGlvbnMoKTtcbn1cblxuZnVuY3Rpb24gdXBkYXRlU1ZHKCkge1xuICAgIGNyZWF0ZVN0YXRlcygpOyBcbn1cblxuZnVuY3Rpb24gdXBkYXRlQWxwaGFiZXQoKSB7XG4gICAgbGV0IGFscGhhYmV0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWxwaGFiZXRJbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgYWxwaGFiZXRJbnB1dC52YWx1ZSA9IGRmYS5hbHBoYWJldC5qb2luKCcsJyk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZU51bVN0YXRlcygpIHtcbiAgICBsZXQgbnVtU3RhdGVzSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbnVtU3RhdGVzSW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIG51bVN0YXRlc0lucHV0LnZhbHVlID0gZGZhLm51bVN0YXRlcy50b1N0cmluZygpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVTdGFydFN0YXRlKCkge1xuICAgIGxldCBzdGFydFN0YXRlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnRTdGF0ZUlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBzdGFydFN0YXRlSW5wdXQudmFsdWUgPSBkZmEuc3RhcnRTdGF0ZS50b1N0cmluZygpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVBY2NlcHRTdGF0ZXMoKSB7XG4gICAgbGV0IGFjY2VwdGluZ1N0YXRlc0lucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FjY2VwdGluZ1N0YXRlc0lucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBhY2NlcHRpbmdTdGF0ZXNJbnB1dC52YWx1ZSA9IGRmYS5hY2NlcHRpbmdTdGF0ZXMuam9pbignLCcpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVUcmFuc2l0aW9ucygpIHtcbiAgICBjbGVhclRyYW5zaXRpb25zTGlzdCgpO1xuICAgIGZvciAobGV0IGZyb21TdGF0ZSA9IDA7IGZyb21TdGF0ZSA8IGRmYS5udW1TdGF0ZXM7IGZyb21TdGF0ZSsrKSB7XG4gICAgICAgIGZvciAobGV0IGxldHRlciBvZiBkZmEuYWxwaGFiZXQpIHtcbiAgICAgICAgICAgIGFkZFRyYW5zaXRpb24oZnJvbVN0YXRlLCBsZXR0ZXIsIGRmYS50cmFuc2l0aW9uc1tmcm9tU3RhdGVdW2xldHRlcl0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjbGVhclRyYW5zaXRpb25zTGlzdCgpIHtcbiAgICBsZXQgdHJhbnNpdGlvbnNMaXN0IDogSFRNTEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRyYW5zaXRpb25zTGlzdFwiKTtcbiAgICB3aGlsZSAodHJhbnNpdGlvbnNMaXN0LmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgdHJhbnNpdGlvbnNMaXN0LnJlbW92ZUNoaWxkKHRyYW5zaXRpb25zTGlzdC5maXJzdENoaWxkKTtcbiAgICB9IFxufVxuXG5mdW5jdGlvbiBhZGRUcmFuc2l0aW9uKGZyb21TdGF0ZTogbnVtYmVyLCBsZXR0ZXI6IHN0cmluZywgdG9TdGF0ZTogbnVtYmVyKSB7XG4gICAgbGV0IHRyYW5zaXRpb25MaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RyYW5zaXRpb25zTGlzdCcpO1xuICAgIGxldCB0ZXh0ID0gZnJvbVN0YXRlLnRvU3RyaW5nKCkgKyAnICsgJyArIGxldHRlciArICcgJnJhcnI7J1xuICAgIGxldCBsaXN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgbGlzdEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbGlzdC1ncm91cC1pdGVtJyk7XG5cbiAgICBsZXQgbGlzdEl0ZW1TdHJpbmcgPSBcbiAgICAnPGRpdiBjbGFzcz1cImlucHV0LWdyb3VwXCI+XFxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpbnB1dC1ncm91cC1wcmVwZW5kXCI+XFxcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImlucHV0LWdyb3VwLXRleHRcIj4nICsgdGV4dCArICc8L3NwYW4+XFxcbiAgICAgICAgICAgIDwvZGl2PlxcXG4gICAgICAgICAgICA8aW5wdXQgdHlwZT1cIm51bWJlclwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgcGxhY2Vob2xkZXI9XCJRXCIgdmFsdWU9XCInICsgdG9TdGF0ZSArICdcIj5cXFxuICAgICAgICA8L2Rpdj4nO1xuICAgIGxpc3RFbGVtZW50LmlubmVySFRNTCA9IGxpc3RJdGVtU3RyaW5nO1xuICAgIHRyYW5zaXRpb25MaXN0LmFwcGVuZENoaWxkKGxpc3RFbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlU3RhdGUoZXZlbnQgOiBNb3VzZUV2ZW50KSB7XG4gICAgdmFyIHN2ZyA6IFNWR1NWR0VsZW1lbnQgPSA8U1ZHU1ZHRWxlbWVudD48YW55PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZmFTdmcnKTtcbiAgICBsZXQgZG9tUG9pbnQgPSBtb3VzZUV2ZW50VG9TVkdDb29yZChzdmcsIGV2ZW50KTtcbiAgICBjcmVhdGVTdGF0ZUF0UG9pbnQoZG9tUG9pbnQueCwgZG9tUG9pbnQueSk7XG59XG5cbmZ1bmN0aW9uIGFkZERyYWcoc3RhdGU6IFNWR0NpcmNsZUVsZW1lbnQsIGdyaWQ6IFNWR1NWR0VsZW1lbnQpIHtcbiAgICBsZXQgc2VsZWN0ZWRFbGVtZW50OiBTVkdDaXJjbGVFbGVtZW50ID0gbnVsbDtcbiAgICBsZXQgb2Zmc2V0IDogRE9NUG9pbnQ7XG5cbiAgICBzdGF0ZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzdGFydERyYWcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGRyYWcpO1xuICAgIHN0YXRlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBlbmREcmFnKTtcblxuICAgIGZ1bmN0aW9uIHN0YXJ0RHJhZyhldmVudDogTW91c2VFdmVudCkge1xuICAgICAgICBzZWxlY3RlZEVsZW1lbnQgPSBzdGF0ZTtcbiAgICAgICAgb2Zmc2V0ID0gbW91c2VFdmVudFRvU1ZHQ29vcmQoZ3JpZCwgZXZlbnQpO1xuICAgICAgICBvZmZzZXQueCAtPSBwYXJzZUZsb2F0KHNlbGVjdGVkRWxlbWVudC5nZXRBdHRyaWJ1dGVOUyhudWxsLCBcImN4XCIpKTtcbiAgICAgICAgb2Zmc2V0LnkgLT0gcGFyc2VGbG9hdChzZWxlY3RlZEVsZW1lbnQuZ2V0QXR0cmlidXRlTlMobnVsbCwgJ2N5JykpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBkcmFnKGV2ZW50OiBNb3VzZUV2ZW50KSB7XG4gICAgICAgIGlmIChzZWxlY3RlZEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBsZXQgZG9tUG9pbnQ6IERPTVBvaW50ID0gbW91c2VFdmVudFRvU1ZHQ29vcmQoZ3JpZCwgZXZlbnQpO1xuICAgICAgICAgICAgc3RhdGUuc2V0QXR0cmlidXRlKCdjeCcsIChkb21Qb2ludC54IC0gb2Zmc2V0LngpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgc3RhdGUuc2V0QXR0cmlidXRlKCdjeScsIChkb21Qb2ludC55IC0gb2Zmc2V0LnkpLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZW5kRHJhZyhldmVudDogTW91c2VFdmVudCkge1xuICAgICAgICBzZWxlY3RlZEVsZW1lbnQgPSBudWxsO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbW91c2VFdmVudFRvU1ZHQ29vcmQoc3ZnOiBTVkdTVkdFbGVtZW50LCBtb3VzZUV2ZW50OiBNb3VzZUV2ZW50KTogRE9NUG9pbnQge1xuICAgIHJldHVybiB0b1N2Z0Nvb3JkKHN2ZywgbW91c2VFdmVudC54LCBtb3VzZUV2ZW50LnkpO1xufVxuXG5mdW5jdGlvbiB0b1N2Z0Nvb3JkKHN2ZzpTVkdTVkdFbGVtZW50LCB4OiBudW1iZXIsIHk6IG51bWJlcik6IERPTVBvaW50IHtcbiAgICBsZXQgcG9pbnQgOiBTVkdQb2ludCA9IHN2Zy5jcmVhdGVTVkdQb2ludCgpO1xuICAgIHBvaW50LnggPSB4O1xuICAgIHBvaW50LnkgPSB5O1xuICAgIFxuICAgIHJldHVybiBwb2ludC5tYXRyaXhUcmFuc2Zvcm0oc3ZnLmdldFNjcmVlbkNUTSgpLmludmVyc2UoKSk7XG59XG5cbmZ1bmN0aW9uIGNsZWFyQWxsKCkge1xuICAgIGNsZWFyUGFuZWwoKTtcbiAgICBjbGVhclN2ZygpO1xufVxuXG5mdW5jdGlvbiBjbGVhclBhbmVsKCkge1xuICAgIGxldCBhbHBoYWJldElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FscGhhYmV0SW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIGFscGhhYmV0SW5wdXQudmFsdWUgPSAnJztcblxuICAgIGxldCBudW1TdGF0ZXNJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdudW1TdGF0ZXNJbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgbnVtU3RhdGVzSW5wdXQudmFsdWUgPSAnJztcblxuICAgIGxldCBzdGFydFN0YXRlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnRTdGF0ZUlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBzdGFydFN0YXRlSW5wdXQudmFsdWUgPSAnJztcblxuICAgIGxldCBhY2NlcHRpbmdTdGF0ZXNJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhY2NlcHRpbmdTdGF0ZXNJbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgYWNjZXB0aW5nU3RhdGVzSW5wdXQudmFsdWUgPSAnJztcbn1cblxuZnVuY3Rpb24gY2xlYXJTdmcoKSB7XG4gICAgY2xlYXJTdGF0ZXMoKTtcbiAgICBjbGVhclRyYW5zaXRpb25zKCk7XG59XG5cbmZ1bmN0aW9uIGNsZWFyU3RhdGVzKCkge1xuICAgIGxldCBlbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3N0YXRlJyk7XG4gICAgZm9yIChsZXQgaSA9IGVsZW1lbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGVsZW1lbnRzW2ldLnJlbW92ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY2xlYXJUcmFuc2l0aW9ucygpIHtcbiAgICBsZXQgdHJhbnNpdGlvbkxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJhbnNpdGlvbnNMaXN0Jyk7XG4gICAgbGV0IGNoaWxkTm9kZXMgPSB0cmFuc2l0aW9uTGlzdC5jaGlsZE5vZGVzO1xuICAgIGZvciAobGV0IGkgPSBjaGlsZE5vZGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGxldCBjaGlsZCA9IGNoaWxkTm9kZXNbaV07XG4gICAgICAgIGNoaWxkLnJlbW92ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlU3RhdGVBdFBvaW50KHN2Z1g6IG51bWJlciwgc3ZnWTogbnVtYmVyKSB7XG4gICAgdmFyIHN2ZyA6IFNWR1NWR0VsZW1lbnQgPSA8U1ZHU1ZHRWxlbWVudD48YW55PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZmFTdmcnKTtcbiAgICB2YXIgY2lyY2xlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwnY2lyY2xlJyk7XG4gICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnZHJhZ2dhYmxlJywgJ3RydWUnKTtcbiAgICBjaXJjbGUuc2V0QXR0cmlidXRlKCdyJywgJzQwJyk7XG4gICAgY2lyY2xlLnNldEF0dHJpYnV0ZSgnY3gnLCBzdmdYLnRvU3RyaW5nKCkpO1xuICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoJ2N5Jywgc3ZnWS50b1N0cmluZygpKTtcbiAgICBjaXJjbGUuc3R5bGUuc3Ryb2tlID0gJ2JsYWNrJztcbiAgICBjaXJjbGUuc3R5bGUuc3Ryb2tlV2lkdGggPSAnMyc7XG4gICAgY2lyY2xlLnN0eWxlLmZpbGwgPSAnd2hpdGUnO1xuICAgIGNpcmNsZS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgY2lyY2xlLmNsYXNzTGlzdC5hZGQoJ3N0YXRlJyk7XG4gICAgY2lyY2xlLm9ubW91c2VlbnRlciA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGNpcmNsZS5zdHlsZS5maWxsID0gJyNCQkJCQkInO1xuICAgIH07XG4gICAgY2lyY2xlLm9ubW91c2VsZWF2ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGNpcmNsZS5zdHlsZS5maWxsID0gJyNGRkZGRkYnO1xuICAgIH1cbiAgICBhZGREcmFnKGNpcmNsZSwgc3ZnKTtcbiAgICBzdmcuYXBwZW5kQ2hpbGQoY2lyY2xlKTtcbn1cblxubGV0IHN0YXRlU3BhY2luZzogbnVtYmVyID0gMjAwO1xuZnVuY3Rpb24gY3JlYXRlU3RhdGVzKCkge1xuICAgIGxldCBzdmcgPSA8U1ZHU1ZHRWxlbWVudD48YW55PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZmFTdmcnKTtcbiAgICBsZXQgbWlkZGxlID0gZGZhLm51bVN0YXRlcyAvIDIgLSAuNTtcbiAgICBsZXQgc3ZnV2lkdGggPSBzdmcuZ2V0QkJveCgpLndpZHRoO1xuICAgIGxldCBzdmdIZWlnaHQgPSBzdmcuZ2V0QkJveCgpLmhlaWdodDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRmYS5udW1TdGF0ZXM7IGkrKykge1xuICAgICAgICBsZXQgc3RhcnRYID0gc3ZnV2lkdGggLyAyICsgKGkgLSBtaWRkbGUpICogc3RhdGVTcGFjaW5nO1xuICAgICAgICBsZXQgc3RhcnRZID0gc3ZnSGVpZ2h0IC8gMiAtIG1pZGRsZSAqIHN0YXRlU3BhY2luZztcbiAgICAgICAgY3JlYXRlU3RhdGVBdFBvaW50KHN0YXJ0WCwgc3RhcnRZKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFkZEdyaWRFdmVudHMoKSB7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dyaWQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGNyZWF0ZVN0YXRlKGV2ZW50KTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gbG9hZERlZmF1bHREZmEoKSB7XG4gICAgbG9hZERmYShjcmVhdGVEZWZhdWx0RGZhKCkpO1xufVxuXG4vL1N0cmluZyB0ZXN0aW5nXG5mdW5jdGlvbiB0ZXN0U3RyaW5nKCkge1xuICAgIGxldCBpbnB1dEVsZW1lbnQgPSA8SFRNTElucHV0RWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVzdFN0cmluZ0lucHV0Jyk7XG4gICAgbGV0IGlucHV0U3RyaW5nIDogc3RyaW5nID0gaW5wdXRFbGVtZW50LnZhbHVlO1xuICAgIGxldCByZXN1bHQgOiBib29sZWFuID0gZGZhLmFjY2VwdHNTdHJpbmcoaW5wdXRTdHJpbmcpO1xuICAgIHJlc3VsdCA/IHJlc3VsdFN1Y2Nlc3MoaW5wdXRTdHJpbmcpIDogcmVzdWx0RmFpbChpbnB1dFN0cmluZyk7XG59XG5cbmZ1bmN0aW9uIGNsZWFySW5wdXQoKSB7XG4gICAgcmVzdWx0UmVzZXQoKTtcbiAgICBsZXQgaW5wdXRFbGVtZW50ID0gPEhUTUxJbnB1dEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rlc3RTdHJpbmdJbnB1dCcpO1xuICAgIGlucHV0RWxlbWVudC52YWx1ZSA9ICcnO1xufVxuXG5mdW5jdGlvbiByZXN1bHRTdWNjZXNzKGlucHV0U3RyaW5nIDogc3RyaW5nKSB7XG4gICAgbGV0IHJlc3VsdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdWx0QmFyJyk7XG4gICAgcmVzdWx0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kID0gJ2dyZWVuJztcbiAgICBsZXQgcmVzdWx0VGV4dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN1bHRUZXh0Jyk7XG4gICAgcmVzdWx0VGV4dC5pbm5lclRleHQgPSAnXCInICsgaW5wdXRTdHJpbmcgKyAnXCIgeWllbGRzIFNVQ0NFU1MnO1xufVxuXG5mdW5jdGlvbiByZXN1bHRGYWlsKGlucHV0U3RyaW5nIDogc3RyaW5nKSB7XG4gICAgbGV0IHJlc3VsdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdWx0QmFyJyk7XG4gICAgcmVzdWx0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JlZCc7XG4gICAgbGV0IHJlc3VsdFRleHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdWx0VGV4dCcpO1xuICAgIHJlc3VsdFRleHQuaW5uZXJUZXh0ID0gJ1wiJyArIGlucHV0U3RyaW5nICsgJ1wiIHlpZWxkcyBGQUlMJztcbn1cblxuZnVuY3Rpb24gcmVzdWx0UmVzZXQoKSB7XG4gICAgbGV0IHJlc3VsdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdWx0QmFyJyk7XG4gICAgcmVzdWx0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kID0gJyM0NDQ0NDQnO1xuICAgIGxldCByZXN1bHRUZXh0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3VsdFRleHQnKTtcbiAgICByZXN1bHRUZXh0LmlubmVyVGV4dCA9ICdSZXN1bHQnO1xufVxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAvL2FkZEdyaWRFdmVudHMoKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZEJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGxvYWREZmFGcm9tRmlsZSgpO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkRXhhbXBsZUJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGxvYWREZWZhdWx0RGZhKCk7XG4gICAgfSk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rlc3RCdG4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICB0ZXN0U3RyaW5nKCk7XG4gICAgfSk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NsZWFyQnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgY2xlYXJBbGwoKTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xlYXJJbnB1dEJ0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNsZWFySW5wdXQoKTtcbiAgICB9KTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVzdFN0cmluZ0lucHV0JykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc3VsdFJlc2V0KCk7XG4gICAgfSk7XG4gICAgbG9hZERlZmF1bHREZmEoKTtcbn0pO1xuIiwiaW1wb3J0IHtyZWFkRmlsZVN5bmMsIHdyaXRlRmlsZVN5bmN9IGZyb20gJ2ZzJztcbmltcG9ydCB7IHN0YXJ0IH0gZnJvbSAncmVwbCc7XG5cbmNsYXNzIERmYSB7XG4gICAgYWxwaGFiZXQ6IHN0cmluZ1tdO1xuICAgIG51bVN0YXRlczogbnVtYmVyO1xuICAgIHN0YXJ0U3RhdGU6IG51bWJlcjtcbiAgICBhY2NlcHRpbmdTdGF0ZXM6IG51bWJlcltdO1xuICAgIHRyYW5zaXRpb25zOiB7W2tleSA6IG51bWJlcl06IHtba2V5OiBzdHJpbmddOiBudW1iZXJ9fTtcblxuICAgIGNvbnN0cnVjdG9yKHtcbiAgICAgICAgYWxwaGFiZXQgPSBbXSxcbiAgICAgICAgbnVtU3RhdGVzID0gMCxcbiAgICAgICAgc3RhcnRTdGF0ZSA9IDAsXG4gICAgICAgIGFjY2VwdGluZ1N0YXRlcyA9IFtdLFxuICAgICAgICB0cmFuc2l0aW9ucyA9IHt9XG4gICAgfToge2FscGhhYmV0Pzogc3RyaW5nW10sIG51bVN0YXRlcz86IG51bWJlciwgc3RhcnRTdGF0ZT86IG51bWJlciwgYWNjZXB0aW5nU3RhdGVzPzogbnVtYmVyW10sIHRyYW5zaXRpb25zPzoge1trZXkgOiBudW1iZXJdOiB7W2tleTogc3RyaW5nXTogbnVtYmVyfX19ID0ge30pIHtcbiAgICAgICAgdGhpcy5hbHBoYWJldCA9IGFscGhhYmV0OyBcbiAgICAgICAgdGhpcy5udW1TdGF0ZXMgPSBudW1TdGF0ZXM7XG4gICAgICAgIHRoaXMuc3RhcnRTdGF0ZSA9IHN0YXJ0U3RhdGU7XG4gICAgICAgIHRoaXMuYWNjZXB0aW5nU3RhdGVzID0gYWNjZXB0aW5nU3RhdGVzO1xuICAgICAgICB0aGlzLnRyYW5zaXRpb25zID0gdHJhbnNpdGlvbnM7XG4gICAgfVxuXG4gICAgYWNjZXB0c1N0cmluZyhpbnB1dFN0cmluZzogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGxldCBleGVjdXRpb24gPSBuZXcgRGZhRXhlY3V0aW9uKHRoaXMsIGlucHV0U3RyaW5nKTtcbiAgICAgICAgZXhlY3V0aW9uLmZpbmlzaCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5hY2NlcHRpbmdTdGF0ZXMuaW5jbHVkZXMoZXhlY3V0aW9uLmN1cnJlbnRTdGF0ZSk7XG4gICAgfVxuXG4gICAgZGVzZXJpYWxpemUoY29udGVudHM6IHN0cmluZykge1xuICAgICAgICBsZXQgbGluZXM6IHN0cmluZ1tdID0gY29udGVudHMuc3BsaXQoJ1xcbicpO1xuICAgICAgICB0aGlzLmFscGhhYmV0ID0gbGluZXNbMF0uc3BsaXQoJywnKTtcbiAgICAgICAgdGhpcy5udW1TdGF0ZXMgPSBwYXJzZUludChsaW5lc1sxXSk7XG4gICAgICAgIHRoaXMuc3RhcnRTdGF0ZSA9IHBhcnNlSW50KGxpbmVzWzJdKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuYWNjZXB0aW5nU3RhdGVzID0gbGluZXNbM10uc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24oaSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGkpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnRyYW5zaXRpb25zID0ge307XG4gICAgICAgIGZvciAobGV0IHN0YXRlID0gMDsgc3RhdGUgPCB0aGlzLm51bVN0YXRlczsgc3RhdGUrKykge1xuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uc1tzdGF0ZV0gPSB7fTtcbiAgICAgICAgICAgIGZvciAobGV0IGNoYXIgb2YgdGhpcy5hbHBoYWJldCkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvbnNbc3RhdGVdW2NoYXJdID0gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgbnVtVHJhbnNpdGlvbnM6IG51bWJlciA9IHRoaXMuYWxwaGFiZXQubGVuZ3RoICogdGhpcy5udW1TdGF0ZXM7XG4gICAgICAgIGZvciAobGV0IGkgPSA0OyBpIDwgNCArIG51bVRyYW5zaXRpb25zOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBsaW5lOiBzdHJpbmdbXSA9IGxpbmVzW2ldLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25zW3BhcnNlSW50KGxpbmVbMF0pXVtsaW5lWzFdXSA9IHBhcnNlSW50KGxpbmVbMl0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2VyaWFsaXplKCk6IHN0cmluZyB7XG4gICAgICAgIGxldCBjb250ZW50czogc3RyaW5nW10gPSBbXTs7XG4gICAgICAgIGNvbnRlbnRzLnB1c2godGhpcy5hbHBoYWJldC5qb2luKCcsJykpO1xuICAgICAgICBjb250ZW50cy5wdXNoKHRoaXMubnVtU3RhdGVzLnRvU3RyaW5nKCkpO1xuICAgICAgICBjb250ZW50cy5wdXNoKHRoaXMuc3RhcnRTdGF0ZS50b1N0cmluZygpKTtcbiAgICAgICAgY29udGVudHMucHVzaCh0aGlzLmFjY2VwdGluZ1N0YXRlcy5qb2luKCcsJykpO1xuICAgICAgICBmb3IgKGxldCBzdGF0ZSA9IDA7IHN0YXRlIDw9IHRoaXMubnVtU3RhdGVzOyBzdGF0ZSsrKSB7XG4gICAgICAgICAgICBmb3IobGV0IGxldHRlciBvZiB0aGlzLmFscGhhYmV0KSB7XG4gICAgICAgICAgICAgICAgY29udGVudHMucHVzaChzdGF0ZS50b1N0cmluZygpICsgJywnICsgbGV0dGVyICsgJywnICsgXG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uc1tzdGF0ZV1bbGV0dGVyXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbnRlbnRzLmpvaW4oJ1xcbicpO1xuICAgIH1cblxuICAgIHJlYWRGcm9tRmlsZShmaWxlcGF0aDogc3RyaW5nKSB7XG4gICAgICAgIGxldCBjb250ZW50czogc3RyaW5nID0gcmVhZEZpbGVTeW5jKGZpbGVwYXRoLCBcInV0ZjhcIik7XG4gICAgICAgIHRoaXMuZGVzZXJpYWxpemUoY29udGVudHMpOyBcbiAgICB9XG5cbiAgICB3cml0ZVRvRmlsZShmaWxlcGF0aDogc3RyaW5nKSB7XG4gICAgICAgIGxldCBjb250ZW50czogc3RyaW5nID0gdGhpcy5zZXJpYWxpemUoKTtcbiAgICAgICAgd3JpdGVGaWxlU3luYyhmaWxlcGF0aCwgY29udGVudHMpO1xuICAgIH1cbn1cblxuY2xhc3MgRGZhRXhlY3V0aW9uIHtcbiAgICBkZmEgOiBEZmE7XG4gICAgY3VycmVudFN0YXRlIDogbnVtYmVyOyBcbiAgICBpbnB1dFN0cmluZyA6IHN0cmluZztcbiAgICBjdXJyZW50Q2hhckluZGV4IDogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoZGZhOiBEZmEsIGlucHV0U3RyaW5nOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5kZmEgPSBkZmE7XG4gICAgICAgIHRoaXMuY3VycmVudFN0YXRlID0gZGZhLnN0YXJ0U3RhdGU7XG4gICAgICAgIHRoaXMuaW5wdXRTdHJpbmcgPSBpbnB1dFN0cmluZztcbiAgICAgICAgdGhpcy5jdXJyZW50Q2hhckluZGV4ID0gMDtcbiAgICB9XG5cbiAgICBmaW5pc2goKSB7XG4gICAgICAgIHdoaWxlICh0aGlzLmN1cnJlbnRDaGFySW5kZXggPCB0aGlzLmlucHV0U3RyaW5nLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5zdGVwKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGVwKCkge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2hhckluZGV4ID49IHRoaXMuaW5wdXRTdHJpbmcubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGN1cnJlbnRDaGFyIDogc3RyaW5nID0gdGhpcy5pbnB1dFN0cmluZ1t0aGlzLmN1cnJlbnRDaGFySW5kZXgrK107XG4gICAgICAgIGxldCBuZXh0U3RhdGUgOiBudW1iZXIgPSB0aGlzLmRmYS50cmFuc2l0aW9uc1t0aGlzLmN1cnJlbnRTdGF0ZV1bY3VycmVudENoYXJdO1xuICAgICAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IG5leHRTdGF0ZTtcbiAgICB9XG59XG5cbmV4cG9ydCB7RGZhLCBEZmFFeGVjdXRpb259OyIsbnVsbF19
